# ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®ä½œã‚Šæ–¹èª¿ã¹

ğŸ“– [Unityã§ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹æ–¹æ³•ã¾ã¨ã‚](https://qiita.com/kazuki_kuriyama/items/20847a040d5f52835ba6)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€Unity ã§ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹æ–¹æ³•ã‚’èª¿ã¹ã‚ˆã†ãœï¼Ÿã€  

![kifuwarabe-futsu.png](https://crieit.now.sh/upload_images/beaf94b260ae2602ca8cf7f5bbc769c261daf8686dbda.png)  
ã€Œã€€JSONãƒ•ã‚¡ã‚¤ãƒ«ã§ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã€  

![ohkina-hiyoko-futsu2.png](https://crieit.now.sh/upload_images/96fb09724c3ce40ee0861a0fd1da563d61daf8a09d9bc.png)  
ã€Œã€€Unity ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¥ãƒ¼ã‚¶ãƒ¼ãŒã€€ã‚ã‚“ã®ï¼Ÿã€  

ğŸ“– [JsonUtility](https://docs.unity3d.com/ja/current/ScriptReference/JsonUtility.html)  
ğŸ“– [EditorJsonUtility.ToJson](https://docs.unity3d.com/ja/current/ScriptReference/EditorJsonUtility.ToJson.html)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¼ãŒï¼’ç¨®é¡ã‚ã‚‹ã‚‰ã—ã„ã€‚ä½¿ã£ã¦ã¿ã‚ˆã†ãœï¼Ÿã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ã‚µãƒ³ãƒ—ãƒ«ãŒç„¡ãã¦ã€€åˆ†ã‹ã‚‰ã‚“ãªã€  

ğŸ“– [ã€Unityã€‘JsonUtilityã‚’è§¦ã£ã¦ã¿ãŸ](https://logicalbeat.jp/blog/8195/)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã‚»ãƒ¼ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€€ï¼‘ï¼ï¼å€‹ãã‚‰ã„åˆ†ã‘ãŸã„ã¨ãã€€ã©ã†ã™ã‚‹ã‚“ã ãœï¼Ÿã€  

![kifuwarabe-futsu.png](https://crieit.now.sh/upload_images/beaf94b260ae2602ca8cf7f5bbc769c261daf8686dbda.png)  
ã€Œã€€ï¼‘ã¤ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã€€ã™ã¹ã¦è©°ã‚è¾¼ã‚€ã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€å®¹é‡ã¯ã€€ä½•ãƒã‚¤ãƒˆã¾ã§ã€€ä¿å­˜ã§ãã‚‹ã‚“ã ãœï¼Ÿã€  

![ohkina-hiyoko-futsu2.png](https://crieit.now.sh/upload_images/96fb09724c3ce40ee0861a0fd1da563d61daf8a09d9bc.png)  
ã€Œã€€ç§»æ¤å…ˆã«ã‚‚ã‚ˆã‚‹ã‚“ã˜ã‚ƒãªã„ã®ï¼Ÿã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€Webãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®ä¸Šã§å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ—ãƒªã ã£ãŸã‚‰ã€ã©ã“ã¸ä¿å­˜ã•ã‚Œã‚‹ï¼Ÿã€  

![kifuwarabe-futsu.png](https://crieit.now.sh/upload_images/beaf94b260ae2602ca8cf7f5bbc769c261daf8686dbda.png)  
ã€Œã€€ãã‚Œã‚‚å«ã‚ã¦èª¿æŸ»ã—ã‚ã ãœã€  

ğŸ“– [æ°¸ç¶šãƒ‡ãƒ¼ã‚¿ â€• ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ã¨è¨­å®šã‚’ä¿å­˜ã™ã‚‹æ–¹æ³•](https://blog.unity.com/ja/technology/persistent-data-how-to-save-your-game-states-and-settings)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ä¿å­˜å…ˆã®è¨­å®šã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ãªã„ã¨ã„ã‘ãªã„ã‚‰ã—ã„ãœã€  

ğŸ“– [UnityTechnologies/UniteNow20-Persistent-Data](https://github.com/UnityTechnologies/UniteNow20-Persistent-Data)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã‚µãƒ³ãƒ—ãƒ«ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€€ã“ã‚Œã‚‰ã—ã„ãœã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ã‚½ãƒ¼ã‚¹èª­ã‚“ã ãŒã€€ä½¿ã„æ–¹ã€€åˆ†ã‹ã‚‰ã‚“ã€‚  
ã©ã†ã‚„ã£ã¦ã€€ã‚¯ãƒ­ã‚¹ãƒ»ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€€ã®ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚Œã‚‹ï¼Ÿ  
Windows ã‚’æƒ³å®šã—ã¦ã€€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æ›¸ã„ã¦ã„ã„ã®ã‹ï¼Ÿã€  

ğŸ“– [PlayerPrefsã¨åŒæ§˜ãªä½¿ã„å‹æ‰‹ã§ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã‚‚ã‚»ãƒ¼ãƒ–ã§ãã‚‹æ©Ÿèƒ½å®Ÿè£…ã€Unityã€‘ã€ã‚»ãƒ¼ãƒ–ã€‘ã€Jsonã€‘](https://magnaga.com/2016/04/25/unity-save2/)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã“ã‚Œã‚’çœŸä¼¼ã¦ã¿ã‚‹ã‹ã ãœã€

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ãªã‚“ã ã“ã®ã‚¯ãƒ©ã‚¹ã¯ã€‚çœŸä¼¼ãŸããªã„æ›¸ãæ–¹ã ãªã€  

# ã‚»ãƒ¼ãƒ–ãƒœã‚¿ãƒ³ã‚’ç½®ã“ã†

![202303_unity_11-2200--saveDataManager-1.png](https://crieit.now.sh/upload_images/e4257f7c7fa838934b0e7872bd1e8a03640c7bc3cdad4.png)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã¨ã‚Šã‚ãˆãšã€€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ»ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã€€é‰„æ¿ã®ã‚„ã‚Šæ–¹ã§ã€€ã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ãç›´ãã†ã€  

![202303_unity_11-2211--onSave-1.png](https://crieit.now.sh/upload_images/9a772f1c008ffd1d8cd102bbfca6878e640c7e2c2fd3c.png)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€`OnSave` ã¨ã„ã†ã€€Publicãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œã£ã¦ã€  

![202303_unity_11-2211--saveButton-1.png](https://crieit.now.sh/upload_images/ea6bc8e52d8e3c6380c649d8dd603506640c7fc19b479.png)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€`Save` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ã€ `SaveDataManager` ã‚¯ãƒ©ã‚¹ã® `OnSave` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã¨ã“ã‚ã¾ã§  
ä½œã‚‹ã®ã¯ã€€é‰„æ¿ã ãœã€  

# ãƒã‚¦ã‚¹ã§å‹•ã‹ã›ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ã“ã†

ğŸ“– [ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ´ã‚“ã§å‹•ã‹ã™](https://futabazemi.net/notes/unity-mouse_drag)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ä¸Šã®ãƒªãƒ³ã‚¯å…ˆã®ã€ä»–äººã®è¨˜äº‹ã‚’èª­ã‚ã ãœã€‚  
ãƒã‚¦ã‚¹ã§å‹•ã‹ã›ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”»é¢ä¸Šã«ç½®ã“ã†ãœï¼Ÿã€  

ğŸ“– [Unityã€€ãƒã‚¦ã‚¹ã‹ã‚‰Rayã‚’æ‰“ã¤ã€€ï½å¯è¦–åŒ–ã‚‚ã™ã‚‹ã‚ˆï½](https://hakase0274.hatenablog.com/entry/2019/11/12/200000)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€åˆ¥ã®è¨˜äº‹ã‚‚èª­ã¾ãªã„ã¨ã€€ã‚³ãƒ¼ãƒ‰ãŒãŠã‹ã—ã„ãœã€  

![202303_unity_11-2333--inputManager-1.png](https://crieit.now.sh/upload_images/00e9629b65a49f0d5deaa5b759b87a80640c9156da8e5.png)  

![202303_unity_11-2326--script.png](https://crieit.now.sh/upload_images/2830c4ae2e78f66fa1074ea64efa4156640c905f83bd0.png)  

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InputManager : MonoBehaviour
{
    /// <summary>
    /// ãƒ¬ã‚¤ã‚’æãè·é›¢
    /// </summary>
    float DebugDrawRayDistance = 15.0f;

    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        // ãƒã‚¦ã‚¹å³ãƒœã‚¿ãƒ³ã€€æŠ¼ã—ã£ã±ãªã—æ™‚
        if (Input.GetMouseButton(0))
        {
            // ãƒ¬ã‚¤ï¼ˆè¦‹ãˆãªã„å…‰ç·šã®ã‚ˆã†ãªã‚‚ã®ï¼‰ã‚’é£›ã°ã™
            var ray = Camera.main.ScreenPointToRay(Input.mousePosition);

            if (Physics.Raycast(ray, out var hit))
            {
                // ãƒ¬ã‚¤ãŒå½“ãŸã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
                string goName = hit.collider.gameObject.name;
                Debug.Log("å³ã‚¯ãƒªãƒƒã‚¯:" + goName);

                // ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­å¿ƒä½ç½®ã‚’ã€ã‚¯ãƒªãƒƒã‚¯ã—ãŸå ´æ‰€ã¸ç§»å‹•ï¼ˆã‚«ã‚¯ã‚«ã‚¯ã—ãŸå‹•ãï¼‰
                GameObject.Find(goName).transform.position = new Vector3(hit.point.x, hit.point.y, 0);
            }
            else
            {
                Debug.Log("å³ã‚¯ãƒªãƒƒã‚¯ å¤–ã‚Œ");
            }

            // ãƒ¬ã‚¤ã‚’æã
            Debug.DrawRay(ray.origin, ray.direction * DebugDrawRayDistance, Color.green, 5, false);
        }
    }
}
```

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã‚«ã‚¯ã‚«ã‚¯ã—ã¦ã‚‹ãŒã€ã¨ã‚Šã‚ãˆãšã€€ã“ã‚Œã§ã€€ç®±ã¯å‹•ããœã€  

![kifuwarabe-futsu.png](https://crieit.now.sh/upload_images/beaf94b260ae2602ca8cf7f5bbc769c261daf8686dbda.png)  
ã€Œã€€`Update()` ã˜ã‚ƒãªãã¦ã€ `LateUpdate()` ã«ã™ã‚Šã‚ƒã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã ãœï¼Ÿã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ã†ã¾ãã‚„ã£ã¦ãã‚Œã ãœã€  

# ã¾ãšã€ PlayerPrefs ã‚’ç·´ç¿’ã—ã‚ˆã†ãœï¼Ÿ

![202303_unity_12-0002--loadButton-1.png](https://crieit.now.sh/upload_images/33f01c48d2ec58268bc1932413f76681640c98527113f.png)  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã‚»ãƒ¼ãƒ–ãƒœã‚¿ãƒ³ã ã‘ã‚ã£ã¦ã‚‚ç·´ç¿’ã§ããªã„ã€‚ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚‚è¿½åŠ ã™ã‚‹ãœã€  

`SaveDataManager.cs` :  

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class SaveDataManager : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    // - ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©

    public void OnSave()
    {
        Debug.Log("ã‚»ãƒ¼ãƒ–ã—ã¾ã™");

        var goCube = GameObject.Find("Cube");
        PlayerPrefs.SetFloat("x", goCube.transform.position.x);
        PlayerPrefs.SetFloat("y", goCube.transform.position.y);
        PlayerPrefs.SetFloat("z", goCube.transform.position.z);
    }

    public void OnLoad()
    {
        Debug.Log("ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™");

        var goCube = GameObject.Find("Cube");
        var x = PlayerPrefs.GetFloat("x");
        var y = PlayerPrefs.GetFloat("y");
        var z = PlayerPrefs.GetFloat("z");
        goCube.transform.position = new Vector3(x, y, z);
    }
}
```

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ğŸ‘†ã€€ã“ã‚Œã§ã€€æ€ã£ã¦ã‚‹ã‚ˆã†ã«ã€€ã‚»ãƒ¼ãƒ–ã¨ãƒ­ãƒ¼ãƒ‰ã¯ã€€ã§ã‘ãŸã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ãƒã‚«ã§ã‹ã„å®¹é‡ã®ã‚»ãƒ¼ãƒ–ã‚’ã—ãŸã„ã¨ãã€€ã“ã‚“ãªã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ ã§ã€€å¯¾å¿œã—ãã‚Œã‚‹ã®ã‹ã ãœï¼Ÿ
ã‚¯ãƒ©ã‚¹ã‚’ã€€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã€€ã—ã¦ã€€æŠ•ã’è¾¼ã‚ãªã„ã®ï¼Ÿã€  

![kifuwarabe-futsu.png](https://crieit.now.sh/upload_images/beaf94b260ae2602ca8cf7f5bbc769c261daf8686dbda.png)  
ã€Œã€€`String` å‹ã®ã‚»ãƒƒã‚¿ãƒ¼ã«ã€€JSON ã‚’æŠ•ã’è¾¼ã‚ã ãœã€  

![ramen-tabero-futsu2.png](https://crieit.now.sh/upload_images/d27ea8dcfad541918d9094b9aed83e7d61daf8532bbbe.png)  
ã€Œã€€ãã‚“ãªã“ã¨ã€€ã—ã¦ã„ã„ã®ã‹ãªâ€¦â€¦ã€  

# // æ›¸ãã‹ã‘
